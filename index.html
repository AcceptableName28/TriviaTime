<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jon vs. Me: Trivia Ultimate</title>
    <style>
        :root {
            --p1-color: #3498db; /* Blue */
            --p2-color: #e74c3c; /* Red */
            --bg-color: #2c3e50;
            --card-bg: #ecf0f1;
            --accent: #f1c40f;
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden; /* Prevent scrolling for app-like feel */
        }

        /* --- SCREENS --- */
        .screen {
            display: none;
            flex-direction: column;
            height: 100%;
            width: 100%;
            padding: 20px;
            align-items: center;
            justify-content: center;
        }
        
        .screen.active { display: flex; }

        /* --- MENU SCREEN --- */
        h1 { color: white; text-align: center; margin-bottom: 30px; font-size: 2rem; }
        .menu-btn {
            background: white;
            color: var(--bg-color);
            width: 100%;
            max-width: 300px;
            padding: 20px;
            margin: 10px 0;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #bdc3c7;
            transition: transform 0.1s;
        }
        .menu-btn:active { transform: translateY(4px); box-shadow: none; }

        /* --- GAME UI --- */
        .header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            color: white;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        .score-box {
            text-align: center;
            padding: 5px 15px;
            border-radius: 10px;
            border: 2px solid transparent;
        }
        .score-p1 { border-color: var(--p1-color); }
        .score-p2 { border-color: var(--p2-color); }
        .score-num { font-size: 1.8rem; font-weight: bold; }
        .score-name { font-size: 0.8rem; text-transform: uppercase; }

        /* TIMER BAR */
        .timer-container {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        .timer-bar {
            height: 100%;
            background: var(--accent);
            width: 100%;
            transition: width 1s linear;
        }

        /* CARD */
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            width: 100%;
            max-width: 500px;
            flex-grow: 1; /* Fill available space */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            position: relative;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .category-badge {
            background: #95a5a6;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .answer-reveal {
            background: #27ae60;
            color: white;
            padding: 15px;
            border-radius: 10px;
            width: 100%;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            display: none; /* Hidden initially */
            animation: fadeIn 0.3s;
        }

        /* --- BUZZER AREA --- */
        .buzzer-area {
            display: flex;
            width: 100%;
            height: 120px;
            gap: 10px;
            margin-top: auto; /* Push to bottom */
        }

        .buzzer-btn {
            flex: 1;
            border: none;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            transition: all 0.1s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .buzzer-btn span { font-size: 0.8rem; font-weight: normal; opacity: 0.8; }

        .btn-p1 { background-color: var(--p1-color); }
        .btn-p1:active { transform: translateY(5px); box-shadow: none; }
        
        .btn-p2 { background-color: var(--p2-color); }
        .btn-p2:active { transform: translateY(5px); box-shadow: none; }

        /* LOCKED STATE (When someone buzzes in) */
        .buzzer-area.locked .buzzer-btn { opacity: 0.3; pointer-events: none; }
        .buzzer-area.locked .buzzer-btn.winner { opacity: 1; transform: scale(1.05); box-shadow: 0 0 15px white; }

        /* CONTROL BUTTONS */
        .controls {
            display: none; /* Hidden until buzzer pressed */
            width: 100%;
            margin-top: 10px;
            gap: 10px;
        }
        .controls.active { display: flex; flex-direction: column; }
        
        .btn-control {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            color: white;
        }
        .btn-correct { background: #27ae60; }
        .btn-wrong { background: #c0392b; }
        .btn-next { background: #34495e; margin-top: 5px; }

        /* ANIMATIONS */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div id="menu-screen" class="screen active">
        <h1>TRIVIA NIGHT</h1>
        <button class="menu-btn" onclick="startGame('standard')">Standard Mode</button>
        <button class="menu-btn" onclick="startGame('bestOf10')">Best of 10 Match</button>
        <button class="menu-btn" onclick="startGame('lightning')">âš¡ Lightning Round</button>
    </div>

    <div id="game-screen" class="screen">
        <div class="header">
            <div class="score-box score-p1">
                <div class="score-name">ME</div>
                <div class="score-num" id="p1-score">0</div>
            </div>
            <div style="font-size:0.8rem; opacity:0.6; align-self:center;" id="mode-display">Standard</div>
            <div class="score-box score-p2">
                <div class="score-name">JON</div>
                <div class="score-num" id="p2-score">0</div>
            </div>
        </div>

        <div class="timer-container">
            <div class="timer-bar" id="timer-bar"></div>
        </div>

        <div class="card">
            <div class="category-badge" id="category">Category</div>
            <div class="question-text" id="question">Loading...</div>
            <div class="answer-reveal" id="answer">The Answer</div>
            
            <div class="controls" id="admin-controls">
                <div style="display:flex; gap:10px; width:100%;">
                    <button class="btn-control btn-correct" style="flex:1" onclick="judgeAnswer(true)">Correct (+1)</button>
                    <button class="btn-control btn-wrong" style="flex:1" onclick="judgeAnswer(false)">Wrong (0)</button>
                </div>
                <button class="btn-control btn-next" onclick="nextQuestion()">Next Question &rarr;</button>
            </div>
        </div>

        <div class="buzzer-area" id="buzzer-area">
            <button class="buzzer-btn btn-p1" id="btn-p1" onclick="buzz(1)">ME<br><span>(Tap)</span></button>
            <button class="buzzer-btn btn-p2" id="btn-p2" onclick="buzz(2)">JON<br><span>(Tap)</span></button>
        </div>
    </div>

    <script>
        // --- DATA ---
        const triviaData = [
            // FRIENDS
            { cat: "Friends", q: "What is the name of Joey's bedtime penguin pal?", a: "Hugsy" },
            { cat: "Friends", q: "What creates the conflict when Ross and Rachel break up? (According to Ross)", a: "WE WERE ON A BREAK!" },
            { cat: "Friends", q: "What is the address Chandler goes to in Yemen to escape Janice?", a: "15 Yemen Road, Yemen" },
            { cat: "Friends", q: "What food does Joey NOT share?", a: "JOEY DOESN'T SHARE FOOD!" },
            
            // HIMYM
            { cat: "HIMYM", q: "What instrument does Ted steal for Robin?", a: "A Blue French Horn" },
            { cat: "HIMYM", q: "What is Barney's job title? (The acronym)", a: "PLEASE (Provide Legal Exculpation And Sign Everything)" },
            { cat: "HIMYM", q: "Who is the pop star alter-ego of Robin Scherbatsky?", a: "Robin Sparkles" },
            { cat: "HIMYM", q: "What is the name of the bar the gang hangs out at?", a: "MacLaren's Pub" },

            // STAR WARS / TREK
            { cat: "Star Wars", q: "What is the name of the planet where the clones were created?", a: "Kamino" },
            { cat: "Star Trek", q: "Which alien race operates according to the Rules of Acquisition?", a: "The Ferengi" },
            
            // 90s & POP CULTURE
            { cat: "90s Movies", q: "In 'Jurassic Park', where are they hiding when the raptors open the door?", a: "The Kitchen" },
            { cat: "90s Music", q: "Finish the lyric: 'Tell me what you want, what you really really want...'", a: "I'll tell you what I want, what I really really want" },
            { cat: "TV Shows", q: "In 'The Office', what kind of farm does Dwight own?", a: "Beet Farm" },
            
            // GENERAL KNOWLEDGE & RANDOM FACTS
            { cat: "Random Fact", q: "Wombat poop is shaped like what geometric object?", a: "A Cube" },
            { cat: "Science", q: "What is the only letter that doesn't appear on the periodic table?", a: "J" },
            { cat: "Geography", q: "Which country has the most islands in the world?", a: "Sweden" },
            { cat: "Funny Fact", q: "A group of crows is called a murder. What is a group of flamingos called?", a: "A Flamboyance" },
            { cat: "Food", q: "What is the only food that can never rot?", a: "Honey" },
            { cat: "History", q: "Who was the shortest US President?", a: "James Madison (5'4\")" },
            { cat: "Tech", q: "What was the very first video game console?", a: "The Magnavox Odyssey" }
        ];

        // --- STATE ---
        let deck = [];
        let p1Score = 0;
        let p2Score = 0;
        let currentMode = 'standard';
        let questionCount = 0;
        let buzzLocked = false;
        let currentBuzzer = 0; // 0=none, 1=p1, 2=p2
        let timerInterval;
        let timeTotal = 30; // seconds

        // --- DOM ELEMENTS ---
        const screens = {
            menu: document.getElementById('menu-screen'),
            game: document.getElementById('game-screen')
        };
        const els = {
            p1Score: document.getElementById('p1-score'),
            p2Score: document.getElementById('p2-score'),
            cat: document.getElementById('category'),
            q: document.getElementById('question'),
            a: document.getElementById('answer'),
            buzzerArea: document.getElementById('buzzer-area'),
            admin: document.getElementById('admin-controls'),
            timer: document.getElementById('timer-bar'),
            mode: document.getElementById('mode-display')
        };

        // --- GAME LOGIC ---

        function startGame(mode) {
            currentMode = mode;
            p1Score = 0;
            p2Score = 0;
            questionCount = 0;
            
            // Setup Mode Specifics
            if(mode === 'lightning') {
                timeTotal = 7; // Fast!
                els.mode.innerText = "Lightning Round (7s)";
            } else if (mode === 'bestOf10') {
                timeTotal = 20;
                els.mode.innerText = "Best of 10";
            } else {
                timeTotal = 30;
                els.mode.innerText = "Standard Mode";
            }

            // Shuffle Deck
            deck = [...triviaData].sort(() => Math.random() - 0.5);

            // Switch Screen
            screens.menu.classList.remove('active');
            screens.game.classList.add('active');

            updateScores();
            nextQuestion();
        }

        function nextQuestion() {
            // Check Win Conditions
            if (currentMode === 'bestOf10' && questionCount >= 10) {
                endGame();
                return;
            }
            if (deck.length === 0) {
                deck = [...triviaData].sort(() => Math.random() - 0.5); // Reshuffle if empty
            }

            // Reset UI
            buzzLocked = false;
            currentBuzzer = 0;
            els.buzzerArea.classList.remove('locked');
            document.getElementById('btn-p1').classList.remove('winner');
            document.getElementById('btn-p2').classList.remove('winner');
            els.admin.classList.remove('active');
            els.a.style.display = 'none';
            els.buzzerArea.style.display = 'flex'; // Show buzzers again

            // Load Question
            const card = deck.pop();
            els.cat.innerText = card.cat;
            els.q.innerText = card.q;
            els.a.innerText = card.a;
            
            questionCount++;

            // Start Timer
            startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);
            els.timer.style.width = '100%';
            let timeLeft = timeTotal;
            
            timerInterval = setInterval(() => {
                timeLeft -= 0.1;
                const percent = (timeLeft / timeTotal) * 100;
                els.timer.style.width = `${percent}%`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    // Time up! Show answer but no points
                    revealAnswer();
                }
            }, 100);
        }

        function buzz(player) {
            if (buzzLocked) return;
            buzzLocked = true;
            currentBuzzer = player;
            clearInterval(timerInterval); // Stop timer

            // Visuals
            els.buzzerArea.classList.add('locked');
            document.getElementById(`btn-p${player}`).classList.add('winner');
            
            // Show Admin Controls immediately
            revealAnswer(true);
        }

        function revealAnswer(buzzed = false) {
            els.a.style.display = 'block';
            els.admin.classList.add('active');
            
            // If time ran out (no buzz), hide buzzers
            if (!buzzed) {
                els.buzzerArea.style.display = 'none';
                currentBuzzer = 0; // No one gets points
            }
        }

        function judgeAnswer(isCorrect) {
            if (isCorrect && currentBuzzer !== 0) {
                if (currentBuzzer === 1) p1Score++;
                else p2Score++;
            }
            
            updateScores();
            
            // In Lightning mode, auto-advance after 1s? No, keep manual for verification
            // nextQuestion(); is called via the "Next" button to allow reading the answer
        }

        function updateScores() {
            els.p1Score.innerText = p1Score;
            els.p2Score.innerText = p2Score;
        }

        function endGame() {
            let winner = p1Score > p2Score ? "ME" : "JON";
            if(p1Score === p2Score) winner = "TIE";
            
            alert(`GAME OVER!\nWinner: ${winner}\nFinal Score: ${p1Score} - ${p2Score}`);
            location.reload(); // Reload to menu
        }

    </script>
</body>
</html>